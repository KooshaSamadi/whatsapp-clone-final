{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Koosha\\\\Desktop\\\\Reed Barger - Build WhatsApp with React 2021-5\\\\whatsapp-clone\\\\src\\\\components\\\\Sidebar.js\",\n    _s = $RefreshSig$();\n\nimport { Avatar, IconButton } from \"@material-ui/core\";\nimport { Add, ExitToApp, Home, Message, PeopleAlt, SearchOutlined } from \"@material-ui/icons\";\nimport React from \"react\";\nimport SidebarList from \"./SidebarList\";\nimport { auth, createTimestamp, db } from \"../firebase\";\nimport \"./Sidebar.css\";\nimport { NavLink, Switch, Route } from \"react-router-dom\";\nimport useRooms from \"../hooks/useRooms\";\nimport useUsers from \"../hooks/useUsers\";\nimport useChats from \"../hooks/useChats\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function Sidebar({\n  user,\n  page\n}) {\n  _s();\n\n  const rooms = useRooms();\n  const users = useUsers(user);\n  const chats = useChats(user);\n  const [searchResults, setSearchResults] = React.useState([]);\n  const [menu, setMenu] = React.useState(1);\n\n  function signOut() {\n    auth.signOut();\n  }\n\n  function createRoom() {\n    const roomName = prompt(\"Type the name of your room\");\n\n    if (input === null) {\n      return; //break out of the function early\n    }\n\n    if (roomName.trim()) {\n      db.collection(\"rooms\").add({\n        name: roomName,\n        timestamp: createTimestamp()\n      });\n    }\n  }\n\n  async function searchUsersAndRooms(event) {\n    event.preventDefault();\n    const query = event.target.elements.search.value;\n    const userSnapshot = await db.collection(\"users\").where(\"name\", \"==\", query).get();\n    const roomSnapshot = await db.collection(\"rooms\").where(\"name\", \"==\", query).get();\n    const userResults = userSnapshot.docs.map(doc => ({\n      id: doc.id,\n      ...doc.data()\n    }));\n    const roomResults = roomSnapshot.docs.map(doc => ({\n      id: doc.id,\n      ...doc.data()\n    }));\n    const searchResults = [...userResults, ...roomResults];\n    setMenu(4);\n    setSearchResults(searchResults);\n  }\n\n  let Nav;\n\n  if (page.isMobile) {\n    Nav = NavLink;\n  } else {\n    Nav = props => /*#__PURE__*/_jsxDEV(\"div\", {\n      className: `${props.activeClass ? \"sidebar__menu--selected\" : \"\"}`,\n      onClick: props.onClick,\n      children: props.children\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 73,\n      columnNumber: 7\n    }, this);\n  }\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"sidebar\",\n    style: {\n      minHeight: page.isMobile ? page.height : \"auto\"\n    },\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"sidebar__header\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"sidebar__header--left\",\n        children: [/*#__PURE__*/_jsxDEV(Avatar, {\n          src: user === null || user === void 0 ? void 0 : user.photoURL\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 91,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"h4\", {\n          children: user === null || user === void 0 ? void 0 : user.displayName\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 92,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 90,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"sidebar__header--right\",\n        children: /*#__PURE__*/_jsxDEV(IconButton, {\n          onClick: signOut,\n          children: /*#__PURE__*/_jsxDEV(ExitToApp, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 96,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 95,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 94,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 89,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"sidebar__search\",\n      children: /*#__PURE__*/_jsxDEV(\"form\", {\n        onSubmit: searchUsersAndRooms,\n        className: \"sidebar__search--container\",\n        children: [/*#__PURE__*/_jsxDEV(SearchOutlined, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 106,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          placeholder: \"Search for users or rooms\",\n          type: \"text\",\n          id: \"search\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 107,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 102,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 101,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"sidebar__menu\",\n      children: [/*#__PURE__*/_jsxDEV(Nav, {\n        to: \"/chats\",\n        activeClassName: \"sidebar__menu--selected\",\n        onClick: () => setMenu(1),\n        activeClass: menu === 1,\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"sidebar__menu--home\",\n          children: [/*#__PURE__*/_jsxDEV(Home, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 123,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"sidebar__menu--line\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 124,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 122,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 116,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Nav, {\n        to: \"/rooms\",\n        activeClassName: \"sidebar__menu--selected\",\n        onClick: () => setMenu(2),\n        activeClass: menu === 2,\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"sidebar__menu--rooms\",\n          children: [/*#__PURE__*/_jsxDEV(Message, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 134,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"sidebar__menu--line\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 135,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 133,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 127,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Nav, {\n        to: \"/users\",\n        activeClassName: \"sidebar__menu--selected\",\n        onClick: () => setMenu(3),\n        activeClass: menu === 3,\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"sidebar__menu--users\",\n          children: [/*#__PURE__*/_jsxDEV(PeopleAlt, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 145,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"sidebar__menu--line\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 146,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 144,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 138,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 115,\n      columnNumber: 7\n    }, this), page.isMobile ? /*#__PURE__*/_jsxDEV(Switch, {\n      children: [/*#__PURE__*/_jsxDEV(Route, {\n        path: \"/chats\",\n        children: /*#__PURE__*/_jsxDEV(SidebarList, {\n          title: \"Chats\",\n          data: chats\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 154,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 153,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(Route, {\n        path: \"/rooms\",\n        children: /*#__PURE__*/_jsxDEV(SidebarList, {\n          title: \"Rooms\",\n          data: rooms\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 157,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 156,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(Route, {\n        path: \"/users\",\n        children: /*#__PURE__*/_jsxDEV(SidebarList, {\n          title: \"Users\",\n          data: users\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 160,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 159,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(Route, {\n        path: \"/search\",\n        children: /*#__PURE__*/_jsxDEV(SidebarList, {\n          title: \"Search Results\",\n          data: searchResults\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 163,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 162,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 152,\n      columnNumber: 9\n    }, this) : menu === 1 ? /*#__PURE__*/_jsxDEV(SidebarList, {\n      title: \"Chats\",\n      data: chats\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 167,\n      columnNumber: 9\n    }, this) : menu === 2 ? /*#__PURE__*/_jsxDEV(SidebarList, {\n      title: \"Rooms\",\n      data: rooms\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 169,\n      columnNumber: 9\n    }, this) : menu === 3 ? /*#__PURE__*/_jsxDEV(SidebarList, {\n      title: \"Users\",\n      data: users\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 171,\n      columnNumber: 9\n    }, this) : menu === 4 ? /*#__PURE__*/_jsxDEV(SidebarList, {\n      title: \"Search Results\",\n      data: searchResults\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 173,\n      columnNumber: 9\n    }, this) : null, /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"sidebar__chat--addRoom\",\n      children: /*#__PURE__*/_jsxDEV(IconButton, {\n        onClick: createRoom,\n        children: /*#__PURE__*/_jsxDEV(Add, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 178,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 177,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 176,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 83,\n    columnNumber: 5\n  }, this);\n}\n\n_s(Sidebar, \"pOALvCvUiQJfb8x+zclxzYToEfk=\", false, function () {\n  return [useRooms, useUsers, useChats];\n});\n\n_c = Sidebar;\n\nvar _c;\n\n$RefreshReg$(_c, \"Sidebar\");","map":{"version":3,"sources":["C:/Users/Koosha/Desktop/Reed Barger - Build WhatsApp with React 2021-5/whatsapp-clone/src/components/Sidebar.js"],"names":["Avatar","IconButton","Add","ExitToApp","Home","Message","PeopleAlt","SearchOutlined","React","SidebarList","auth","createTimestamp","db","NavLink","Switch","Route","useRooms","useUsers","useChats","Sidebar","user","page","rooms","users","chats","searchResults","setSearchResults","useState","menu","setMenu","signOut","createRoom","roomName","prompt","input","trim","collection","add","name","timestamp","searchUsersAndRooms","event","preventDefault","query","target","elements","search","value","userSnapshot","where","get","roomSnapshot","userResults","docs","map","doc","id","data","roomResults","Nav","isMobile","props","activeClass","onClick","children","minHeight","height","photoURL","displayName"],"mappings":"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","sourcesContent":["import { Avatar, IconButton } from \"@material-ui/core\";\nimport {\n  Add,\n  ExitToApp,\n  Home,\n  Message,\n  PeopleAlt,\n  SearchOutlined,\n} from \"@material-ui/icons\";\nimport React from \"react\";\nimport SidebarList from \"./SidebarList\";\nimport { auth, createTimestamp, db } from \"../firebase\";\nimport \"./Sidebar.css\";\nimport { NavLink, Switch, Route } from \"react-router-dom\";\nimport useRooms from \"../hooks/useRooms\";\nimport useUsers from \"../hooks/useUsers\";\nimport useChats from \"../hooks/useChats\";\n\nexport default function Sidebar({ user, page }) {\n  const rooms = useRooms();\n  const users = useUsers(user);\n  const chats = useChats(user);\n\n  const [searchResults, setSearchResults] = React.useState([]);\n  const [menu, setMenu] = React.useState(1);\n\n  function signOut() {\n    auth.signOut();\n  }\n\n  function createRoom() {\n    const roomName = prompt(\"Type the name of your room\");\n    if (input === null) {\n      return; //break out of the function early\n  }\n    if (roomName.trim()) {\n      db.collection(\"rooms\").add({\n        name: roomName,\n        timestamp: createTimestamp(),\n      });\n    }\n  }\n\n  async function searchUsersAndRooms(event) {\n    event.preventDefault();\n    const query = event.target.elements.search.value;\n    const userSnapshot = await db\n      .collection(\"users\")\n      .where(\"name\", \"==\", query)\n      .get();\n    const roomSnapshot = await db\n      .collection(\"rooms\")\n      .where(\"name\", \"==\", query)\n      .get();\n    const userResults = userSnapshot.docs.map((doc) => ({\n      id: doc.id,\n      ...doc.data(),\n    }));\n    const roomResults = roomSnapshot.docs.map((doc) => ({\n      id: doc.id,\n      ...doc.data(),\n    }));\n    const searchResults = [...userResults, ...roomResults];\n    setMenu(4);\n    setSearchResults(searchResults);\n  }\n\n  let Nav;\n  if (page.isMobile) {\n    Nav = NavLink;\n  } else {\n    Nav = (props) => (\n      <div\n        className={`${props.activeClass ? \"sidebar__menu--selected\" : \"\"}`}\n        onClick={props.onClick}\n      >\n        {props.children}\n      </div>\n    );\n  }\n\n  return (\n    <div\n      className=\"sidebar\"\n      style={{\n        minHeight: page.isMobile ? page.height : \"auto\",\n      }}\n    >\n      <div className=\"sidebar__header\">\n        <div className=\"sidebar__header--left\">\n          <Avatar src={user?.photoURL} />\n          <h4>{user?.displayName}</h4>\n        </div>\n        <div className=\"sidebar__header--right\">\n          <IconButton onClick={signOut}>\n            <ExitToApp />\n          </IconButton>\n        </div>\n      </div>\n\n      <div className=\"sidebar__search\">\n        <form\n          onSubmit={searchUsersAndRooms}\n          className=\"sidebar__search--container\"\n        >\n          <SearchOutlined />\n          <input\n            placeholder=\"Search for users or rooms\"\n            type=\"text\"\n            id=\"search\"\n          />\n        </form>\n      </div>\n\n      <div className=\"sidebar__menu\">\n        <Nav\n          to=\"/chats\"\n          activeClassName=\"sidebar__menu--selected\"\n          onClick={() => setMenu(1)}\n          activeClass={menu === 1}\n        >\n          <div className=\"sidebar__menu--home\">\n            <Home />\n            <div className=\"sidebar__menu--line\" />\n          </div>\n        </Nav>\n        <Nav\n          to=\"/rooms\"\n          activeClassName=\"sidebar__menu--selected\"\n          onClick={() => setMenu(2)}\n          activeClass={menu === 2}\n        >\n          <div className=\"sidebar__menu--rooms\">\n            <Message />\n            <div className=\"sidebar__menu--line\" />\n          </div>\n        </Nav>\n        <Nav\n          to=\"/users\"\n          activeClassName=\"sidebar__menu--selected\"\n          onClick={() => setMenu(3)}\n          activeClass={menu === 3}\n        >\n          <div className=\"sidebar__menu--users\">\n            <PeopleAlt />\n            <div className=\"sidebar__menu--line\" />\n          </div>\n        </Nav>\n      </div>\n\n      {page.isMobile ? (\n        <Switch>\n          <Route path=\"/chats\">\n            <SidebarList title=\"Chats\" data={chats} />\n          </Route>\n          <Route path=\"/rooms\">\n            <SidebarList title=\"Rooms\" data={rooms} />\n          </Route>\n          <Route path=\"/users\">\n            <SidebarList title=\"Users\" data={users} />\n          </Route>\n          <Route path=\"/search\">\n            <SidebarList title=\"Search Results\" data={searchResults} />\n          </Route>\n        </Switch>\n      ) : menu === 1 ? (\n        <SidebarList title=\"Chats\" data={chats} />\n      ) : menu === 2 ? (\n        <SidebarList title=\"Rooms\" data={rooms} />\n      ) : menu === 3 ? (\n        <SidebarList title=\"Users\" data={users} />\n      ) : menu === 4 ? (\n        <SidebarList title=\"Search Results\" data={searchResults} />\n      ) : null}\n\n      <div className=\"sidebar__chat--addRoom\">\n        <IconButton onClick={createRoom}>\n          <Add />\n        </IconButton>\n      </div>\n    </div>\n  );\n}\n"]},"metadata":{},"sourceType":"module"}